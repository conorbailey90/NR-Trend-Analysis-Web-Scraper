<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Home</title>
</head>
<body>

   
    
    <h1 class="welcome">NR Trend Analysis Data Scraper</h1>
  
    <div class="container-one">
        <div class="code-one">
            <p>var TAObj = { "Date of Completion" : "", "Alert Number" : "", "Originator" : "", "OC Country" : "", "Originating Bank" : "", "OB Country" : "", "Locations Differ" : "No", "Intermediary 1" : "", "Int1 Country" : "", "Intermediary 2" : "", "Int 2 Country" : "", "Beneficiary Bank" : "", "BB Country" : "", "Beneficiary" : "", "BC Country" : "", "Locations Differ 2" : "", "Santander Customer Involvement" : "", "Outcome" : "Close", "Date SAR Submitted" : "", "SAR Acknowledgement" : "", "Scenario" : ""}</p>
          
            <p>var alertNumber = document.querySelector("#main-content").innerText.slice(38,53);</p>   
            <p>TAObj['Alert Number'] = alertNumber;</p>  
            <p>var scenario = document.querySelector("#AMLCB__SMAlertDetectionDetailsrow0 > td.cell_AMLCB__DetectionList_ScenarioName_RO").innerText;</p> 
            <p>TAObj['Scenario'] = scenario;</p>     
            <p>window.name = JSON.stringify(TAObj);</p>    

        </div>
        <div class="copy-one">Copy to clipboard</div>
    </div>

    <div class="container-two">
        <div class="code-two">
            <p>var TAObj =  JSON.parse(window.name);</p>
            <p>dataList = []</p>
            <p>var bicCodes = { "ADCBAEAAXXX" : ["ABU DHABI COMMERCIAL BANK", "UAE"], "ABBYGB2LXXX" : ["Santander UK PLC", "United Kingdom"]}</p>  
            <p>var originator = document.querySelector("#STR_EIM__TransactionSummaryOriginator__EIM__Originator_Details_Static_1 > table > tbody > tr:nth-child(1) > td > span.pairRight.fieldspan_EIM__Originator_Name_1").innerText;</p>  
            <p>TAObj['Originator'] = originator;</p>  
            <p>var originatorCountry = document.querySelector("#STR_EIM__TransactionSummaryOriginator__EIM__Originator_Details_Static_1 > table > tbody > tr:nth-child(6) > td > span.pairRight.fieldspan_EIM__Originator_Country_1").innerText;</p>  
            <p>TAObj['OC Country'] = originatorCountry;</p>  
            <p>var originatingBank = document.querySelector("#STR_EIM__TransactionSummaryOriginator__EIM__Originator_AccountDetails_Static_1 > table > tbody > tr:nth-child(2) > td > span.pairRight.fieldspan_EIM__Originator_AccountBIC_1").innerText;</p>  
            <p>if (originatingBank in bicCodes){
                    TAObj['Originating Bank'] = bicCodes[originatingBank][0];
                    TAObj['OB Country'] = bicCodes[originatingBank][1];
                }else{
                    TAObj['Originating Bank'] = originatingBank;
                };</p>  
            <p>var beneLink = document.querySelector("#STR_EIM__TransactionSummaryBeneficiarytab");</p> 
            
            <p>setTimeout(function(){
                    beneLink.click();
                },500);</p>
            <p>  setTimeout(function(){
                    var beneficiary = document.querySelector("#STR_EIM__TransactionSummaryBeneficiary__EIM__Beneficiary_Details_Static_1 > table > tbody > tr:nth-child(1) > td > span.pairRight.fieldspan_EIM__Beneficiary_Name_1").innerText;
                    TAObj['Beneficiary'] = beneficiary
                    var beneficiaryBank = document.querySelector("#STR_EIM__TransactionSummaryBeneficiary__EIM__Beneficiary_AccountDetails_Static_1 > table > tbody > tr:nth-child(2) > td > span.pairRight.fieldspan_EIM__Beneficiary_AccountBIC_1").innerText;
                    if (beneficiaryBank in bicCodes){
                    TAObj['Beneficiary Bank'] = bicCodes[beneficiaryBank][0];
                    TAObj['BB Country'] = bicCodes[beneficiaryBank][1];
                    }else{
                        TAObj['Beneficiary Bank'] = beneficiaryBank;
                    };
                    
                    var beneficiaryCountry = document.querySelector("#STR_EIM__TransactionSummaryBeneficiary__EIM__Beneficiary_Details_Static_1 > table > tbody > tr:nth-child(6) > td > span.pairRight.fieldspan_EIM__Beneficiary_Country_1").innerText;
                    TAObj['BC Country'] = beneficiaryCountry;
                    TAObj['Locations Differ'] = (TAObj['OC Country'] == TAObj['OB Country'] ? "No" : "Yes")
                    TAObj['Locations Differ 2'] = (TAObj['BC Country'] == TAObj['BB Country'] ? "No" : "Yes")
                    TAObj['Santander Customer Involvement'] = (TAObj['Originating Bank'] ==  "Santander UK PLC" ||  TAObj['Beneficiary Bank'] == "Santander UK PLC" ? "Yes" : "No")
                    dataList.push (TAObj);
                    },1000);
                    with ({ copy }) { setTimeout(() => copy(dataList), 2000) }
                    
                    setTimeout(function(){
                    console.log('Completed')
                    },2000);</p>
        
        </div>
        <div class="copy-two">Copy to clipboard</div>
    </div>

    <!-- <input type="text" placeholder="Paste Net Reveal JSON data here with ctrl + v" class="json-input"> -->
    <textarea placeholder="Paste Net Reveal JSON data here with ctrl + v" class="json-input" name="" id="" cols="30" rows="10"></textarea>
    <div class="table-container">
        <table class="trend-analysis"></table>
        <div class="copy-table">Copy Table</div>
    </div>

    <!-- <div class="create-table">Create table</div> -->
    <div class="clear">Clear</div>
    <script src="app.js"></script>
    
    
</body>
</html>

